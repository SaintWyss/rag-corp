# =============================================================================
# TARJETA CRC - .env.example (Plantilla de entorno local)
# =============================================================================
# Responsabilidades:
# - Documentar variables de entorno necesarias para correr el stack local.
# - Proveer placeholders seguros (sin secretos reales).
# - Servir como base para crear un .env NO versionado.
#
# Colaboradores:
# - compose.yaml (orquestacion local)
# - apps/backend/app/crosscutting/config.py (Settings)
# - docs/runbook/security-rotation.md (rotacion de secretos)
#
# Invariantes:
# - NO incluir valores reales de secretos.
# - Mantener claves alineadas con Settings y compose.
# =============================================================================

# ============================================
# RAG Corp - Environment Configuration (EXAMPLE)
# ============================================
# Copia esto a .env y completa los secretos.
# IMPORTANTE: .env.example NO debe tener secretos reales.

APP_ENV=local

# Dev Seed Admin (Local Only)
DEV_SEED_ADMIN=1
DEV_SEED_ADMIN_EMAIL=admin@local
DEV_SEED_ADMIN_PASSWORD=admin


# DB (Docker Internal Config)
# ---------------------------
# Conexion desde la API hacia la base de datos interna de Docker
DATABASE_URL=postgresql://postgres:postgres@db:5432/rag

# DB Credentials (for POSTGRES container creation)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=rag


# AI Configuration
# ----------------
# Pon tu API Key aqui (SOLO en .env, NO en .env.example).
GOOGLE_API_KEY=YOUR_GOOGLE_API_KEY_HERE
# Si no queres usar Google en local, podes usar fakes:
FAKE_LLM=0
FAKE_EMBEDDINGS=0


# Frontend
# --------
# URL del backend para el frontend (server-only)
RAG_BACKEND_URL=http://localhost:8000


# Redis (Docker Internal)
# -----------------------
REDIS_URL=redis://redis:6379
EMBEDDING_CACHE_BACKEND=redis


# Worker
# ------
WORKER_HTTP_PORT=8001


# Storage (S3/MinIO Docker Internal)
# ----------------------------------
S3_ENDPOINT_URL=http://minio:9000
S3_BUCKET=rag-documents
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_REGION=us-east-1


# ============================================
# Advanced Configuration (Defaults preserved)
# ============================================

# DB Pool
DB_POOL_MIN_SIZE=2
DB_POOL_MAX_SIZE=10
DB_STATEMENT_TIMEOUT_MS=30000

# CORS
ALLOWED_ORIGINS=http://localhost:3000
CORS_ALLOW_CREDENTIALS=false

# Chunking (RAG Params)
CHUNK_SIZE=900
CHUNK_OVERLAP=120

# API limits & Security
MAX_TOP_K=20
MAX_INGEST_CHARS=100000
MAX_QUERY_CHARS=2000
MAX_TITLE_CHARS=200
MAX_SOURCE_CHARS=500
API_KEYS_CONFIG=
METRICS_REQUIRE_AUTH=false
RBAC_CONFIG=
RATE_LIMIT_RPS=10
RATE_LIMIT_BURST=20
MAX_BODY_BYTES=10485760
MAX_UPLOAD_BYTES=26214400

# Auth
# SOLO en .env real. Genera uno nuevo si lo vas a usar.
JWT_SECRET=CHANGE_ME_GENERATE_A_SECRET
# Dominio de cookie (opcional, si seteas Domain en el backend)
JWT_COOKIE_DOMAIN=


# Observability
OTEL_ENABLED=0
OTEL_EXPORTER_OTLP_ENDPOINT=

# Healthcheck
HEALTHCHECK_GOOGLE_ENABLED=true

# RAG Quality
PROMPT_VERSION=v2
MAX_CONTEXT_CHARS=12000
MAX_CONVERSATION_MESSAGES=12

# Retry Logic
RETRY_MAX_ATTEMPTS=3
RETRY_BASE_DELAY_SECONDS=1.0
RETRY_MAX_DELAY_SECONDS=30.0
