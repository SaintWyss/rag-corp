{
  "name": "rag-corp",
  "private": true,
  "license": "UNLICENSED",
  "packageManager": "pnpm@10.0.0",
  "engines": {
    "node": ">=20.11.0",
    "pnpm": "10.x"
  },
  "scripts": {
    "preinstall": "corepack enable",
    "dev": "turbo run dev --parallel",
    "build": "turbo run build",
    "lint": "turbo run lint",
    "lint:cache:clear": "turbo clean",
    "stack:core": "docker compose up -d --build db migrate rag-api",
    "stack:ui": "docker compose --profile ui up -d --build db migrate rag-api web",
    "stack:rag": "docker compose --profile rag up -d --build",
    "stack:obs": "docker compose --profile observability up -d",
    "stack:full": "docker compose --profile full up -d --build",
    "stack:all": "docker compose --profile full --profile ui up -d --build",
    "stack:ps": "docker compose ps",
    "stack:logs": "docker compose logs -f --tail=200",
    "stack:logs:api": "docker compose logs -f --tail=200 rag-api",
    "stack:logs:worker": "docker compose logs -f --tail=200 worker",
    "stack:stop": "docker compose down --remove-orphans",
    "stack:reset": "docker compose down -v --remove-orphans",
    "stack:nuke": "node -e \"if(process.env.CONFIRM!=='YES'){console.error('Refuse: set CONFIRM=YES to run stack:nuke');process.exit(1)}\" && docker compose down -v --remove-orphans && docker system prune -a --volumes --force",
    "db:migrate": "docker compose run --rm --no-deps migrate",
    "db:psql": "docker compose exec db psql -U postgres -d rag",
    "admin:bootstrap": "docker compose run --rm --no-deps rag-api python scripts/create_admin.py",
    "contracts:export": "docker compose run --rm --no-deps rag-api python scripts/export_openapi.py --out /repo/shared/contracts/openapi.json",
    "contracts:gen": "pnpm --filter @contracts gen",
    "test:backend:unit": "docker compose run --rm --no-deps --build rag-api pytest -m unit",
    "e2e:install": "pnpm -C tests/e2e install",
    "e2e:install:browsers": "pnpm -C tests/e2e exec playwright install",
    "e2e": "pnpm run e2e:install && pnpm -C tests/e2e exec playwright test",
    "e2e:ui": "pnpm run e2e:install && pnpm -C tests/e2e test:ui",
    "changelog": "conventional-changelog -p angular -i CHANGELOG.md -s",
    "changelog:first": "conventional-changelog -p angular -i CHANGELOG.md -s -r 0",
    "version": "pnpm changelog && git add CHANGELOG.md"
  },
  "devDependencies": {
    "conventional-changelog-cli": "4.1.0",
    "turbo": "2.0.0"
  }
}
