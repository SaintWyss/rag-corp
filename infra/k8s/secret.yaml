# =============================================================================
# TARJETA CRC - infra/k8s/secret.yaml
# =============================================================================
# Responsabilidades:
# - Proveer una PLANTILLA de Secret (solo referencia, NO aplicar en base).
# - Documentar las claves sensibles requeridas por backend/worker.
#
# Colaboradores:
# - infra/k8s/backend-deployment.yaml
# - docs/runbook/security-rotation.md
# - infra/k8s/externalsecrets/* (alternativa recomendada)
#
# Invariantes:
# - NO incluir secretos reales en el repo.
# - Esta plantilla NO debe aplicarse con kustomize base.
# =============================================================================

# TEMPLATE ONLY — NO APLICAR EN CLUSTER
# Motivo: evita despliegues accidentales con placeholders.
# Uso correcto: crear un Secret real (ragcorp-secrets) via ExternalSecrets o kubectl.
apiVersion: v1
kind: Secret
metadata:
  name: ragcorp-secrets-template
  namespace: ragcorp
  labels:
    app.kubernetes.io/name: ragcorp
    app.kubernetes.io/component: secrets
  annotations:
    ragcorp.io/template-only: "true"
    ragcorp.io/do-not-apply: "true"
type: Opaque
stringData:
  # Database URL (postgresql://user:pass@host:5432/db)
  DATABASE_URL: "__REPLACE_ME__"

  # Google API Key
  GOOGLE_API_KEY: "__REPLACE_ME__"

  # JWT secret (>= 32 chars)
  JWT_SECRET: "__REPLACE_ME__"

  # API Keys Config (JSON)
  API_KEYS_CONFIG: "__REPLACE_ME__"

  # RBAC Config (JSON) — alternativa a API_KEYS_CONFIG
  RBAC_CONFIG: "__REPLACE_ME__"

  # Redis URL (opcional)
  REDIS_URL: "__REPLACE_ME__"

  # S3-compatible (opcional)
  S3_ENDPOINT_URL: "__REPLACE_ME__"
  S3_BUCKET: "__REPLACE_ME__"
  S3_ACCESS_KEY: "__REPLACE_ME__"
  S3_SECRET_KEY: "__REPLACE_ME__"
  S3_REGION: "__REPLACE_ME__"
